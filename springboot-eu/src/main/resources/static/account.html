<!doctype html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    
    <title>Pullman - eCommerce Bootstrap 4 Template</title>
  	<style type="text/css">
    #allmap{width:500px;height:500px;}
    p{margin-left:5px; font-size:14px;}
  	</style>
    <!-- Favicon -->
    <link rel="shortcut icon" type="image/x-icon" href="assets/img/favicon.ico">

  	<link rel="stylesheet" href="assets/css/basic.css" />	
    <link rel="stylesheet" href="assets/css/vendor/bootstrap.min.css">
    <!-- Font-awesome CSS -->
    <link rel="stylesheet" href="assets/css/vendor/font-awesome.min.css">
    <!-- Slick slider css -->
    <link rel="stylesheet" href="assets/css/plugins/slick.min.css">
    <!-- animate css -->
    <link rel="stylesheet" href="assets/css/plugins/animate.css">
    <!-- Nice Select css -->
    <link rel="stylesheet" href="assets/css/plugins/nice-select.css">
    <!-- jquery UI css -->
    <link rel="stylesheet" href="assets/css/plugins/jqueryui.min.css">
    <!-- main style css -->
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="css/index.css">

</head>

<body id="index">
<input id="currentTime_" type="hidden" value="1409623012768">
<div id="headTop">
  <ul class="headTopUl clearfix">
    <li class="headTopUser">
      <ul class="headTopList clearfix">
        <li class="headRelat headline"> <em class="l-ico"></em> </li>
      </ul>
    </li>
    <li class="headTopLogin" > 
    <span class="Gray7" id = shownow></span>
    <span class="Gray7" id = showtou></span>
    <span class="Gray7" id="show"> 您好！请 
    [<a class="yellowd1"  rel="nofollow" href="login.html" target="_blank">登录</a>] <b class="borderdc">|</b> [<a class="yellowd1" rel="nofollow" href="register.html" target="_blank">注册</a>] <b class="borderdc p_0_10">|</b> </span>
      <ul class="clearfix">
        <li id="msgCount" class="headTopUlist no"> <em class="messico">messico</em> <a class="Gray7" rel="nofollow" href="#">消息</a> </li>
       
      </ul>
      <a id="integration" href="#"> <em></em> 领积分抵钱 </a> </li>
  </ul>
</div>
    <!-- offcanvas search form start -->
    <div class="offcanvas-search-wrapper">
        <div class="offcanvas-search-inner">
            <div class="offcanvas-close">
                <i class="fa fa-close"></i>
            </div>
            <div class="container">
                <div class="offcanvas-search-box">
                    <form class="d-flex bdr-bottom w-100">
                        <input type="text" placeholder="Search entire storage here...">
                        <button class="search-btn"><i class="fa fa-search"></i>search</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!-- offcanvas search form end -->

    <main>
        <!-- breadcrumb area start -->
        <div class="breadcrumb-area breadcrumb-img bg-img" data-bg="assets/img/banner/shop.jpg">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <div class="breadcrumb-wrap">
                            <nav aria-label="breadcrumb">
                                <h3 class="breadcrumb-title">MY ACCOUNT</h3>
                                <ul class="breadcrumb justify-content-center">
                                    <li class="breadcrumb-item"><a href="index.html"><i class="fa fa-home"></i></a></li>
                                    <li class="breadcrumb-item active" aria-current="page">My Account</li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- breadcrumb area end -->

        <!-- my account wrapper start -->
        <div class="my-account-wrapper section-padding"></div>
            <div class="container">
                <div class="section-bg-color">
                    <div class="row">
                        <div class="col-lg-12">
                            <!-- My Account Page Start -->
                            <div class="myaccount-page-wrapper">
                                <!-- My Account Tab Menu Start -->
                                <div class="row">
                                    <div class="col-lg-3 col-md-4">
                                        <div class="myaccount-tab-menu nav" role="tablist">
                                            <a href="#dashboad" class="active" data-toggle="tab"><i class="fa fa-dashboard"></i>
                                                                                                      个人资料</a>
                                            <a href="#orders" data-toggle="tab"><i class="fa fa-cart-arrow-down"></i>
                                                                                                       我的购物车</a>
                                            <a href="#download" data-toggle="tab"><i class="fa fa-cloud-download"></i>
                                                		我的订单</a>
                                            <a href="#address-edit" data-toggle="tab"><i class="fa fa-map-marker"></i>
                                                                                                       收货地址</a>
                                          
                                        </div>
                                    </div>
                                    <!-- My Account Tab Menu End -->

                                    <!-- My Account Tab Content Start -->
      
                                    <div class="col-lg-9 col-md-8">
    <!--个人资料-->
    <div class="tab-content" id="myaccountContent">                                     
    <div class="tab-pane fade show active" id="dashboad" role="tabpanel">
    <div class="myaccount-content">
    <h5>个人资料</h5>    
    <form id="shop_form" target="iframe">
    <ul> 
	  <li class="member"><label>用户图像:</label><input type="file" id="btn_file" style="display:none" name="photo" multiple="multiple" onchange="setImagePreviews(this, 'shownowa')" /></li>
      <li class="member" id="shownowa" ></li>
      <li class="member"><label>用户昵称:</label><input id="J_uniqueName-mask" type="text" class="" ></li>
      <li class="member"><label>真实姓名:</label><input id="J_realname-mask" type="text" class="" ></li>
      <li class="member"><label>电话号码:</label><input id="tel" type="text" class=""></li>
  	  <li class="member"><button type="submit" id="btn_mem" class="btn btn-sqr">保存</button></li>
    </ul>
    </form> 
    <iframe id="iframe" name="iframe" style="display:none;"></iframe> 
</div>
</div>


     <!-- 购物车 -->
     <div class="tab-pane fade" id="orders" role="tabpanel">
     <div class="myaccount-content">
     <h5>购物车</h5>
    	<div id="app">
		<h3>全部商品{{length}}</h3>
		<div class="biaoti" >
			<ul>
				<li><input type="checkbox" id="sure" v-model="fv" @click="sd"  ><label for="checkbox">全选</label></li>
				<li>商品</li>
				<li>单价</li>
				<li>数量</li>
				<li>小计</li>
				<li>操作</li>
			</ul>
		</div>
		<div class="liebiao" id="list">
			<ul id="fff" class="et"  v-for="(e,index) in we">
				<li> <input type="checkbox" id="be" v-model="e.checked" @click="wq(index)"></li>
				              
				<li><img :src="e.pics" style="height:50px; weight:50px"/></li>
				<li>{{e.intro}}</li>
				<li>{{e.price}}</li>
				<li><button v-on:click="subtract(index)">-</button>
					<input type="text"  size="1" id="ef" v-model="e.num">
					<button v-on:click="add(index)">+</button>
				</li>
				<li>{{wer(index)}}</li>
				<li @click="fun(index)">删除</li>
				
			</ul>
		   
		   <div v-if="!we.length"></div>
		   <div id="aq"  :class={ghj:but}>
		    	<span > 已选择{{sde()}}件商品</span>  <span class="weq">合计{{wry()}}</span> <button  @click="ed">清空购物车</button>
		   </div>
		    
		</div>
	</div>
     </div>
</div>
                                           
     <!-- 订单信息 -->
    <div class="tab-pane fade" id="download" role="tabpanel">
         <div class="myaccount-content">
         <h5>订单信息</h5>
         <div class="myaccount-table table-responsive text-center">
         <table id="MemberOder" class="table table-bordered">
         <thead class="thead-light">
<tr>
         <th>商品名:</th>
         <th>商品图片:</th>
         <th>商品价格</th>
         <th>商品数量</th>
         <th>操作</th>
</tr>
</thead>
<tbody></tbody>

</table>
      </div>
   </div>
</div>
                   
       <!-- 收获地址 -->
       <div class="tab-pane fade" id="address-edit" role="tabpanel">
       <div class="myaccount-content">
       <h5>新增收货地址</h5>
        <div id="allmap"></div>
<form id="shop_form" target="iframe">
	<ul>
	    <li class="member1">
	       <label>地址信息:</label>
           <select id="Home_dialog_province" name=Home_dialog_province class="nice-select pompom" ></select>
           <select id="Home_dialog_city" name=city class="nice-select pompom"></select>
           <select id="Home_dialog_area" name=area class="nice-select pompom"></select>
              <button id="showMy">
           	<img src="images/city.jpg" style="height:45px;width:45px">
           </button>
       	</li>
	   	<li class="member1"><label for="Home_dialog_addr">详细地址:</label><input id="Home_dialog_addr" name=addr type="text" class="navy_ipt400" placeholder="请输入详细地址信息,如道路、小区、楼栋号、单元等信息"></li>
       	<li class="member1"><label for="homeName">收货人姓名:</label><input type="text" id="homeName" name=homeName class="navy_ipt200 " placeholder="请输入收货人昵称..."/></li>
       	<li class="member1"><label for="Home_dialog_tel">手机电话:</label><input id="Home_dialog_tel" name=tel type="text" class="navy_ipt200" placeholder="请输入电话号码..."></li>          
		<li class="member1"><button  id="btn_addhome" class="btn btn-sqr">保存</button></li>
</ul>
</form>
<iframe id="iframe" name="iframe" style="display:none;"></iframe> 
     <table id="member_addr" class="table table-bordered">
     <thead class="thead-light">
<tr>
     <th>收货人</th>
     <th>所在地区</th>
     <th>详细地址</th>
     <th>手机</th>
     <th>操作</th>
</tr>
</thead>
     <tbody></tbody>
     </table>
</div>
</div>
                                       
                                        </div>
                                    </div> <!-- My Account Tab Content End -->
                                </div>
                            </div> <!-- My Account Page End -->
                        </div>
                    </div>
                </div>
            </div>
    
        <!-- my account wrapper end -->
    </main>

    <!-- Scroll to top start -->
    <div class="scroll-top not-visible">
        <i class="fa fa-angle-up"></i>
    </div>
    <!-- Scroll to Top End -->


    <!-- footer area start -->
    <footer class="black-bg">
        <!-- newsletter area start -->
        <section class="newsletter-area">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <div class="newsletter-wrapper text-center">
                            <h3 class="title text-white">JOIN OUR NEWSLETTER</h3>
                            <form class="newsletter-inner" id="mc-form">
                                <input type="email" class="news-field" id="mc-email" autocomplete="off" placeholder="Enter your email address">
                                <button class="news-btn" id="mc-submit">Subscribe</button>
                            </form>
                            <h6 class="newsletter-subtitle">To get the latest news from us please subscribe your email.</h6>
                            <!-- mailchimp-alerts Start -->
                            <div class="mailchimp-alerts">
                                <div class="mailchimp-submitting"></div><!-- mailchimp-submitting end -->
                                <div class="mailchimp-success"></div><!-- mailchimp-success end -->
                                <div class="mailchimp-error"></div><!-- mailchimp-error end -->
                            </div>
                            <!-- mailchimp-alerts end -->
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- newsletter area end -->
        <div class="footer-widget-area">
            <div class="container">
                <div class="row mtn-30">
                    <div class="col-lg-3 col-sm-6">
                        <div class="footer-widget-item mt-30">
                            <h6 class="widget-title">CUSTOM LINKS</h6>
                            <ul class="usefull-links">
                                <li><a href="#">Privacy Policy</a></li>
                                <li><a href="#">Order Status</a></li>
                                <li><a href="#">Returns  Exchanges</a></li>
                                <li><a href="#">Size Guide</a></li>
                                <li><a href="#">Cart</a></li>
                                <li><a href="#">FAQ</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-lg-3 col-sm-6">
                        <div class="footer-widget-item mt-30">
                            <h6 class="widget-title">PRODUCTS</h6>
                            <ul class="usefull-links">
                                <li><a href="#">Prices drop</a></li>
                                <li><a href="#">New products</a></li>
                                <li><a href="#">Best sales</a></li>
                                <li><a href="#">Contact us</a></li>
                                <li><a href="#">Sitemap</a></li>
                                <li><a href="#">Stores</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-lg-3 col-sm-6">
                        <div class="footer-widget-item mt-30">
                            <h6 class="widget-title">OUR COMPANY</h6>
                            <ul class="usefull-links">
                                <li><a href="#">Delivery</a></li>
                                <li><a href="#">Legal Notice</a></li>
                                <li><a href="#">About us</a></li>
                                <li><a href="#">Secure payment</a></li>
                                <li><a href="#">Contact us</a></li>
                                <li><a href="#">Sitemap</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-lg-3 col-sm-6">
                        <div class="footer-widget-item mt-30">
                            <h6 class="widget-title">YOUR ACCOUNT</h6>
                            <ul class="usefull-links">
                                <li><a href="#">Personal info</a></li>
                                <li><a href="#">Orders</a></li>
                                <li><a href="#">Credit slips</a></li>
                                <li><a href="#">Addresses</a></li>
                                <li><a href="#">Stores</a></li>
                                <li><a href="#">FAQ</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer-middle-area">
            <div class="container">
                <div class="row mtn-30">
                    <div class="col-lg-6 col-sm-12">
                        <div class="address-block mt-30">
                            <div class="footer-logo">
                                <a href="index.html">
                                    <img src="assets/img/logo/logo.png" alt="Brand Logo">
                                </a>
                            </div>
                            <address class="address-info d-flex align-items-center">
                                <i class="fa fa-map-marker"></i>
                                <p><span>ADDRESS : </span> No 40 Baria Sreet 15/2 NewYork City, NY, United States.</p>
                            </address>
                        </div>
                    </div>
                    <div class="col-lg-3 col-sm-6">
                        <address class="address-info email mt-30">
                            <i class="fa fa-envelope"></i>
                            <p><span>EMAIL : </span><a href="emailto:demo@yoursite.com">demo@yoursite.com</a></p>
                        </address>
                    </div>
                    <div class="col-lg-3 col-sm-6">
                        <address class="address-info email mt-30">
                            <i class="fa fa-phone"></i>
                            <p><span>PHONE : </span><a href="tel:+880123456789">+880123456789</a></p>
                        </address>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="footer-bottom-area text-center">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <div class="payment-method-list">
                            <img src="assets/img/payment-2.png" alt="payment method">
                        </div>
                        <div class="footer-link">
                            <a href="#">SITE MAP</a>
                            <a href="#">SEARCH TERMS</a>
                            <a href="#">ADVANCED SEARCH</a>
                            <a href="#">ORDERS AND RETURNS</a>
                            <a href="#">CONTACT US</a>
                        </div>
                        <p class="copyright">
                            Copyright <a href="http://www.17sucai.com/">Pullman</a>. All Rights Reserved
                        </p>
                    </div>
                </div>
            </div>
        </div>
        
    </footer> 
    <span id="account" class="account"></span>
    <script src="assets/js/vendor/modernizr-3.6.0.min.js"></script>
    <!-- jQuery JS -->
    <script src="assets/js/vendor/jquery-3.3.1.min.js"></script>
    <!-- Popper JS -->
    <script src="assets/js/vendor/popper.min.js"></script>
    <!-- Bootstrap JS -->
    <script src="assets/js/vendor/bootstrap.min.js"></script>
    <!-- slick Slider JS -->
    <script src="assets/js/plugins/slick.min.js"></script>
    <!-- Countdown JS -->
    <script src="assets/js/plugins/countdown.min.js"></script>
    <!-- Nice Select JS -->
    <script src="assets/js/plugins/nice-select.min.js"></script>
    <!-- jquery UI JS -->
    <script src="assets/js/plugins/jqueryui.min.js"></script>
    <!-- Image zoom JS -->
    <script src="assets/js/plugins/image-zoom.min.js"></script>
    <!-- image loaded js -->
    <script src="assets/js/plugins/imagesloaded.pkgd.min.js"></script>
    <!-- masonry  -->
    <script src="assets/js/plugins/masonry.pkgd.min.js"></script>
    <!-- mailchimp active js -->
    <script src="assets/js/plugins/ajaxchimp.js"></script>
    <!-- contact form dynamic js -->
    <script src="assets/js/plugins/ajax-mail.js"></script>
    <!-- google map api -->
    <!-- google map active js -->
    <!-- Main JS -->
<script src="assets/js/main.js"></script>
<script  type="text/javascript" src="js/jquery-3.5.1.min.js"></script>
<script  type="text/javascript"  src="back/js/ajaxfileupload.js"></script>
<script  type="text/javascript"  src="back/js/showpic.js"></script>
<script  type="text/javascript"  src="js/addr1.js"></script>
<script type="text/javascript" src="js/vue.js"></script>
<script type="text/javascript" src="js/axios.js"></script>
<script type="text/javascript" src="js/qs.js"></script>
<script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=XpekOBYjYbLTidXV8vP2LvGL2DRj7AXB"></script>
<script type="text/javascript">

bindAddr("xml/city.xml");

//获取用户名
var nickName=sessionStorage.getItem("account");
console.log(nickName);
if(nickName != null){
	$("#show").empty(); 
	photo();
}
//显示用户头像
function photo(){
	$.post("login", {op:"find", nickName:nickName}, data=> {
		if(data.code == 200){
			console.log(data.data.photo);
			if(data.data.photo == null){
				var pics = ";";
				var imgStr = "<img src='images/qq.jpg'  width='50px' height='50px'   style =margin-left:-120px"+pics+"border-radius:50% '/>";
				$("#shownow").html("").append($(imgStr));
				$("#showDAY").html("欢迎:" + nickName);
				console.log(imgStr);
			}else{
				var imgStr = "<img src='../../" + data.data.photo + "' width='50px' height='50px' style =margin-left:-120px"+pics+"border-radius:50% />";
				$("#shownow").html("").append($(imgStr));
				$("#showDAY").html("欢迎:" + nickName);
			}
		}else{
			window.location.href = "back/login.html"; 
		}
		
	}, "json");	
}
photo();


//显示用户信息
function showMemberDetail() {
	$.post("login", {op:"find",nickName:nickName}, data=> {
			$("#J_uniqueName-mask").val(data.data.nickName);
			$("#J_realname-mask").val(data.data.realName);
			$("#tel").val(data.data.tel);
			console.log(data.data.photo);
			if(data.data.photo==null){
				var pics = ";";
				var imgStr = "<img src='images/qq.jpg'  width='80px' height='80px''/>";
				$("#shownowa").html("").append($(imgStr));
				console.log(imgStr);
			}else{
				var imgStr = "<img src='../../" + data.data.photo + "' width='80px' height='80px' width: '100%' />";
				$("#shownowa").html("").append($(imgStr));
			}
	}, "json");
}
showMemberDetail();

   
  $("#shownowa").click(function(){
  	 $("#btn_file").click();//隐藏了input:file样式，点击头像就可以选择文件      
});


  
 //修改用户信息
 $("#btn").click(function(){
	 	var nickName = $.trim($("#J_uniqueName-mask").val());
		var realName = $.trim($("#J_realname-mask").val());
		var tel = $.trim($("#tel").val());
		var obj = {nickName:nickName,realName:realName,tel,tel}
		
		$.ajaxFileUpload({
			url: "login?op=update",
			secureuri: false,
			fileElementId: "btn_files",
			dataType: "json", //数据格式
			data: obj,   //发送的数据

			success: function(data, status) {			
				if(data.code == 200) {
				} else {
				}
			},
			error: function(data, status, e) {
			}
		});  
});

     
	//用户信息修改
     $("#btn_mem").click(function(){	
    	 	var nickName = $.trim($("#J_uniqueName-mask").val());
    		var realName = $.trim($("#J_realname-mask").val());
    		var tel = $.trim($("#tel").val());
    		var obj = {nickName:nickName,realName:realName,tel,tel}
    		
    		$.ajaxFileUpload({
    			url: "login?op=update",
    			secureuri: false,
    			fileElementId: "btn_file",
    			dataType: "json", //数据格式
    			data: obj,   //发送的数据
	
    			success: function(data, status) {			
    				if(data.code == 200) {
    					showMemberDetail();
    				} else {
    				}
    			},
    			error: function(data, status, e) {
    			}
    		});  
 });
 
	
//订单信息显示
function showOrder(){
        	    $.ajax({
        	        url : "cart?op=findOrder",
        	        type : "get",
        	        success : function (data){
        	            var obj = eval(data);
        	            console.log(obj);
        	            var tbody = $('<tbody></tbody>');
        	            $(obj).each(function (index){
        	                var val = obj[index];
        	                var tr = $('<tr></tr>');
        	                tr.append('<td>'+ val.gname +'</td>'+'<td><img src='+val.pics+' width=80px height=80px /></td>'+'<td>'+ val.price +'</td>'+'<td>'+ val.nums +'<td><a id="shouhuo" href="javascript:void(0);" onclick="quer('+val.cid+')">确认收货</a></td>');        	                
        	                tbody.append(tr);
        	            });
        	            $('#MemberOder tbody').replaceWith(tbody);
        	        }
        	    });
        	}
showOrder();
//确认收货
         quer: function quer(cid){
       	 var obj = {cid:cid}
       		$.ajax({
       			url: "cart?op=updateOrderStatus",
       			dataType: "json",
       			data: obj,
       			
       			success: function(data, status) {
       				if(data.code == 200) {
       					showOrder();
       					return;
       				} else {
       				}
       			},
       			error: function(data, status, e) {
       			}
       		});
        }
        
	
//添加地址信息
 $("#btn_addhome").click(function(){
	 	var homeName =$.trim( $("#homeName").val() );
	 	var province = $.trim( $("#Home_dialog_province").val());
		var city =$.trim( $("#Home_dialog_city").val());
		var area =$.trim( $("#Home_dialog_area").val());
		var addr =$.trim( $("#Home_dialog_addr").val());
		var tel =$.trim($("#Home_dialog_tel").val());
	 
		var obj = {homeName:homeName,province:province, city:city, area:area, addr:addr,tel:tel}
				$.ajax({
					url: "home?op=add",
					dataType: "json",
					data: obj,
					
					success: function(data, status) {
						if(data.code == 200) {
							showAddr();
						} else {
						}
					},
					error: function(data, status, e) {
					}
				});
			
	});
	
//显示用户保存的地址信息
         function showAddr(){
        	    $.ajax({
        	        url : "home?op=finds",
        	        type : "get",
        	        success : function (data){
        	            var obj = eval(data);
        	            console.log(obj);
        	            var tbody = $('<tbody></tbody>');
        	            $(obj).each(function (index){
        	                var val = obj[index];
        	                var tr = $('<tr></tr>');
        	                tr.append('<td>'+ val.homeName +'</td>'+'<td>'+ val.province+ val.city + val.area +'</td>'+'<td>'+ val.addr +'</td>'+'<td>'+ val.tel +'<td><a id="deleaddr" href="javascript:void(0);" onclick="del('+val.hid+')">删除</a></td>');        	                
        	                tbody.append(tr);
        	            });
        	            $('#member_addr tbody').replaceWith(tbody);
        	        }
        	    });
        	}
         showAddr();
    
         del: function del(hid){
       	 var obj = {hid:hid}
       		$.ajax({
       			url: "home?op=delete",
       			dataType: "json",
       			data: obj,
       			
       			success: function(data, status) {
       				if(data.code == 200) {
       					 showAddr();
       					return;
       				} else {
       				}
       			},
       			error: function(data, status, e) {
       			}
       		});
        }
 
         
         
//购物车模块
var we = new Vue({
	el:"#app",
	data:{
        fv:false,
		arr:[],
		et:"df",
        bb:"",
		ws:"",
		wert:0,
	    er:"",
		but:false,
		we:[]
	},
		mounted:function() {
		axios.post("cards", qs.stringify({op: "find"})).then(rt => {
			if (rt.status == 200) {
				this.we = rt.data.data;
			}
		})
	},
	methods:{
		ed:function(){
			this.we="";
			this.but=true;
			this.fv=false;
			document.getElementById("sure").disabled="disabled";

		},
		add:function(e){
			this.we[e].num++;


		},
		subtract:function(e){
			if (this.we[e].num<=0){
				alert('受不了啦，宝贝不能再减少啦')
				this.count=0;
			}else {
				this.we[e].num-=1;
			}
		},
		wq:function(e){
			//点击方框
			var  arrs=[];
			this.we[e].checked=!this.we[e].checked
			if(this.we[e].checked){
				document.getElementById("list").getElementsByClassName("et")[e].style.backgroundColor="red";

			}else{
				document.getElementById("list").getElementsByClassName("et")[e].style.backgroundColor="";
				//this.fv=false;
			}
			for (var i = 0;i<this.we.length;i++){

				arrs.push(this.we[i].checked);

			}
			if(arrs.indexOf(false)==-1){
				this.fv=true

			}else{
				this.fv=false
			}

		},

		fun:function(e){
		//删除
		//console.log(index);
			if (!confirm("您确认要删除此订单吗？")) {
				return;
			}
			var scid = this.we[e].scid;
			//先删除订单中的数据
			axios.post("cards", qs.stringify({op: "del",scid:scid})).then(rt => {
				if (rt.status == 200 && rt.data.code == 200) {
					this.we.splice(e, 1); //从vue对象中删除当前元素
					this.wry(); //重新计算总价
					return;
				}
			})


		},
		sd:function(){
			console.log(this.we.length)
			if(this.fv){
				for(var i =0;i<this.we.length;i++){
					this.we[i].checked=false
					document.getElementById("list").getElementsByClassName("et")[i].style.backgroundColor="";
				}

			}else{
				for(var i =0;i<this.we.length;i++){
					console.log(i)

					this.we[i].checked=true
					this.fv=true;
					document.getElementById("list").getElementsByClassName("et")[i].style.backgroundColor="#ff80c0";
				}
			}
		},
		wer:function(index){
			//this.sxc(index);
		//	console.log(Math.floor(this.we[index].price*Number(this.we[index].num)))
			return Math.floor(this.we[index].price*Number(this.we[index].num));

		},

		sde:function(){
			var  total=0;
			for(var i=0;i<this.we.length;i++){
				if(this.we[i].checked){
					total+=parseInt(this.we[i].num);
				}
			}
           return total;
         },
		wry:function(){
			var totall=0;
			for(var i=0;i<this.we.length;i++){
				if(this.we[i].checked){
					totall+=parseInt(this.we[i].num*this.we[i].price);
				}
			}
			return totall;
		}



	},computed:{
		length:function(){
			return this.we.length;
		}	
	}
})

//地图定位
// 百度地图API功能
var map = new BMap.Map("allmap");
map.centerAndZoom(new BMap.Point(116.404, 39.915), 11);
// 添加带有定位的导航控件
var navigationControl = new BMap.NavigationControl({
  // 靠左上角位置
  anchor: BMAP_ANCHOR_TOP_LEFT,
  // LARGE类型
  type: BMAP_NAVIGATION_CONTROL_LARGE,
  // 启用显示定位
  enableGeolocation: true
});
map.addControl(navigationControl);
// 添加定位控件
var geolocationControl = new BMap.GeolocationControl();
geolocationControl.addEventListener("locationSuccess", function(e){
  // 定位成功事件

  var province = e.addressComponent.province;
  var city = e.addressComponent.city;
  var district = e.addressComponent.district;
  var street = e.addressComponent.street;
  alert("当前定位地址为：" + province+city+district+street);
});
geolocationControl.addEventListener("locationError",function(e){
  // 定位失败事件
  alert(e.message);
});
map.addControl(geolocationControl);
	
window.onload=function(){
	    var myDiv = document.getElementById("allmap");
	    document.addEventListener("click",function(){
	        myDiv.style.display="none";
	    });
	    myDiv.addEventListener("click",function(event){
	        event=event||window.event;
	        event.stopPropagation();
	    });
	};  
   
	
	
	  $("#showMy").click(function(){
		  var myDiv = document.getElementById("allmap");
		    document.addEventListener("click",function(){
		        myDiv.style.display="block";
		    });
	  }) 
 
 
 </script>   
</body>
</html>